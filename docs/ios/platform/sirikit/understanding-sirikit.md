---
title: SiriKit の概念を理解します。
description: このドキュメントでは、Xamarin.iOS アプリで SiriKit を操作するために必要な主要な概念について説明します。 たとえば、インテントについて説明しますおよび Intents UI 拡張機能、SiriKit のアクセス許可は、優れたエクスペリエンスなどを設計します。
ms.prod: xamarin
ms.assetid: 99EC5C1E-484F-4371-8555-58C9F60DE37F
ms.technology: xamarin-ios
author: lobrien
ms.author: laobri
ms.date: 05/02/2017
ms.openlocfilehash: b72246968c9b321329e56fd51eaaa98a1625922e
ms.sourcegitcommit: e268fd44422d0bbc7c944a678e2cc633a0493122
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/25/2018
ms.locfileid: "50123077"
---
# <a name="understanding-sirikit-concepts"></a>SiriKit の概念を理解します。

_この記事では、Xamarin.iOS アプリで SiriKit を操作するために必要な主要な概念について説明します。_


新しい ios 10 では、SiriKit により、Xamarin.iOS アプリを iOS デバイスで Siri とマップ アプリを使用してユーザーにアクセスできるサービスを提供します。 この機能は、new を使用して 1 つまたは複数のアプリの拡張機能で提供**インテント**と**Intents UI**フレームワーク。

SiriKit により、アプリ拡張機能と、新しいを使用して iOS デバイスで Siri とマップ アプリを使用してユーザーがアクセスできるサービスを提供する iOS アプリ**インテント**と**Intents UI**フレームワーク。

Siri の動作の概念を**ドメイン**のグループが関連するタスクの操作を把握します。 Siri アプリに含まれる各操作は必要がありますには、次のようにその既知のサービスのドメインのいずれかに分類されます。

- オーディオまたはビデオ通話。
- 素敵を予約します。
- トレーニングを管理します。
- メッセージング。
- 写真を検索します。
- 送信または支払いを受信します。

SiriKit 送信、拡張機能で、ユーザーがアプリの拡張機能のサービスのいずれかに関連する siri 要求を行うと、**インテント**の関連データと共に、ユーザーの要求を記述するオブジェクト。 アプリ拡張機能は、適切な生成**応答**オブジェクトを指定された**インテント**、拡張機能が要求を処理する方法の詳細を示します。

## <a name="the-intents-and-intents-ui-extensions"></a>Intents および Intents UI 拡張機能

Siri とマップ アプリの両方は、2 種類のアプリの拡張機能を使用して、アプリのサービスとやり取りします。

- **Intents の拡張機能**-Siri の提供し、アプリを使って、マップのコンテンツとサポートされている任意のインテントを満たすために必要なタスクを実行します。
- **Intents UI 拡張機能**-Siri または Maps のいずれかの内部でのアプリのコンテンツの表示されるカスタム UI を提供します。

アプリは、SiriKit をサポートする Intents の拡張機能を提供する必要があります、Siri とマップは、ユーザーに提示する情報を提供して、インテントを処理するために行います。

Siri は通常すべてのユーザー操作を処理し、各サポートされているドメインで情報を表すために標準的な組み込み UI があるために、Intents UI 拡張機能の作成は省略可能です。 アプリが使用できる、する Intents UI 拡張機能を提供し、**インテント UI**豊富なカスタム ユーザー インターフェイスを備えたアプリのブランドを表示するためにフレームワークと追加情報。

## <a name="siri-and-the-maps-app-role"></a>Siri とマップのアプリ ロール

ユーザーの音声要求は、言語に処理され、目的の拡張機能を処理できる実行可能なインテントにそれらの要求が Siri によって分析される意味です。

マップでは、アプリの目的とした拡張機能を使用して、ユーザーの操作への応答でマップのインターフェイスに情報を表示します。 近くのレストランを要求したり、取得など、アプリのレストランを確認します。

Siri とマップの両方は、すべてのユーザーの操作の管理、標準システム インターフェイスを使用して結果を表示します。 アプリ拡張機能のロールは、主に表示されるデータを提供すること。 必要に応じて、アプリは Intents UI 拡張機能を提供し、既定のシステム インターフェイスを強化するためにカスタム UI を表示することができます。

## <a name="interacting-with-siri-via-sirikit"></a>SiriKit を使用する Siri と対話します。

このセクションでは、SiriKit が Siri を使用するアプリと対話するユーザーをどのように使用する方法の概要を紹介します。 この例で使用する偽 MonkeyChat アプリ。

[![](understanding-sirikit-images/monkeychat01.png "MonkeyChat アイコン")](understanding-sirikit-images/monkeychat01.png#lightbox)

MonkeyChat ユーザーの友人の連絡先独自書籍を保持する、各 (Bobo など) のような画面の名前に関連付けられたを画面の名前で各友人にテキストのチャットを送信できます。

さまざまな人々 がさまざまな形式で同じ要求を行うことがありますので、ユーザーに、アプリとのやり取りを開始可能性があります多くの方法はあります。

たとえば、ユーザーが友人の Bobo にメッセージを送信しようとすると、Siri と次のメッセージ交換がある場合します。

_ユーザー: さん、Siri MonkeyChat メッセージを送信します。_<br />
_Siri: にだれか。_<br />
_ユーザー: Bobo します。_<br />
_Siri: 何と答えて Bobo でしょうか。_<br />
_ユーザーの場合は、複数 Bananas を送信してください。_<br />

別のユーザーには、別のメッセージ交換で要求を同じをことがあります。

_: ユーザーは、Bobo MonkeyChat 上にメッセージを送信します。_<br />
_Siri: 何と答えて Bobo でしょうか。_<br />
_ユーザーの場合は、複数 bananas を送信してください。_<br />

別のユーザーは、さらに短いコードの要求を行う可能性があります。

_ユーザー: MonkeyChat Bobo に複数の bananas を送信してください。_<br />
_Siri: Ok、メッセージを送信する送信してください複数 bananas Bobo Monkeychat 上。_<br />

または、別の言語でも同じ要求を行います。

_ユーザー: MonkeyChat Bobo s'il vous plaît envoyer plus de bananes します。_<br />
_Siri: Oui、envoi メッセージ s'il vous plaît envoyer plus de bananes 比べて Bobo サー Monkeychat_<br />

まだ他のユーザーは、メッセージ交換で非常に冗長になる可能性があります。

_ユーザー: こんにちは Siri くださいお願いし、できますを送信する MonkeyChat アプリを起動、テキスト メッセージを複数 bananas を送信してください。_<br />
_Siri: にだれか。_<br />
_ユーザー: マイ ベスト pal Bobo します。_<br />

さらに、Siri 要求が行われた方法に基づいて一部の要求に応答するさまざまな方法があります。

- **ホーム ボタンを押し続けて**-Siri が限られた口頭でフィードバックをさらに visual 応答を提供します。
- **"Hey Siri"によって**-Siri がより口頭であるし、少ない visual 応答を提供します。

Siri は、ユーザーのアクセシビリティ ニーズを満たすとは対話し、それらのニーズに基づいて応答にも調整されます。

要求に配布する方法や、Siri が要求に応答する方法に関係なく Siri がユーザーにメッセージ交換を処理し、(その拡張機能) を使用してアプリ機能を提供します。

ユーザーが Siri の音声要求を行ったときに Siri は次の手順は。

[![](understanding-sirikit-images/monkeychat02.png "Siri は以下の手順")](understanding-sirikit-images/monkeychat02.png#lightbox)

1. Siri のユーザーのオーディオは、まず、**音声**テキストに変換します。
2. 次に、テキストに変換、**インテント**ユーザーの要求の表現を構造化します。
3. 目的に基づいて、Siri かかります**アクション**ユーザーの要求を実行します。
4. Siri が最後に、表示は**応答**(ビジュアルおよび音声の両方) を実行するアクションに基づくユーザー。

アプリケーションが Siri とユーザーの会話で一部を実行できる 3 つの主な方法はあります。

[![](understanding-sirikit-images/monkeychat03.png "アプリが Siri とユーザーのメッセージ交換に参加してみて、次の 3 つの主な方法")](understanding-sirikit-images/monkeychat03.png#lightbox)

1. **ボキャブラリ**-これは、どのアプリ通知 Siri とのやり取りを把握する必要がある単語。
2. **アプリ ロジック**- これらは、アクションと、アプリを実行する応答が特定のインテントに基づいて。
3. **ユーザー インターフェイス**-これは、省略可能なカスタム ユーザー インターフェイスで、アプリがその応答を与えることができます。

### <a name="example"></a>例

上記の情報を指定するには、MonkeyChat アプリに次のメッセージ交換は対話する方法を確認します。

_ユーザー: こんにちは Siri、Bobo MonkeyChat 上にメッセージを送信します。_<br />
_Siri: 何と答えて Bobo でしょうか。_<br />
_ユーザーの場合は、複数 bananas を送信してください。_<br />

アプリは、メッセージ交換の最初のロールでは、Siri ユーザーの音声を理解します。

[![](understanding-sirikit-images/monkeychat04.png "Siri ユーザー音声の理解を支援")](understanding-sirikit-images/monkeychat04.png#lightbox)

Siri"Bobo"で、そのデータベースの名前はありませんが、アプリは、Siri を語彙を使用してこの情報が共有します。 アプリにも役立ちます Siri Bobo は、Siri としてを指定したそのので、受信者を認識、*連絡先*します。

Siri を知っていますので、そのメッセージがコンテンツが必要かどうかを表示するアプリの拡張機能をチェックして迅速に、受信者だけよりもメッセージを送信するために必要。 Siri が質問をユーザーに応答する MonkeyChat のため、: *"どのような do you want Bobo をでしょうか"。*

上記の例では、ユーザーが応答、 *「複数 bananas を送信してください」*、Siri は、構造化にバンドルする**インテント**:

[![](understanding-sirikit-images/monkeychat05.png "Siri を使用して、ユーザーの応答を構造化のインテントにバンドル")](understanding-sirikit-images/monkeychat05.png#lightbox)

構造化の目的は、次の情報が含まれます。

- **ドメイン:** メッセージ
- **目的:** sendMessage
- **受信者:** Bobo
- **コンテンツ:** 複数 bananas を送信してください

セットとして各ドメインは、知って*アクション*に多くのパラメーターは、目的に含めることがゼロに内で実行してドメインと、アクションに基づくことができますが、アプリに送信されます。

目的は、しに送信されてアプリの拡張機能の処理します。 その結果、インテントを処理するには、アプリによって生成されます、 **IntentResponse**が目的でのアプリのアプリを記述するパラメーターを含めるし、目的でまとめられます。

各 IntentResponse は含めることも、**応答コード**Siri に指示するかどうか、アプリが完了する要求かどうか。 一部のドメインがある非常に特定のエラー応答コードにも送信できます。

最後に、IntentResponse にが含まれます、 `NSUserActivity` (手の形をサポートするために使用されるものなど)。 `NSUserActivity`応答では、Siri 環境のままにし、アプリを完成させますを入力することが必要な場合は、アプリを起動するために使用されます。 

Siri が自動的に適切なビルド`NSUserActivity`Siri 環境で、ユーザーの中断場所アプリおよびピックアップを開始します。 ただし、アプリから提供される独自`NSUserActivity`で必要な場合にをカスタマイズします。

アプリは、目的が処理され、Siri への応答が返されますが後、結果は、ユーザーに (口頭でおよび視覚的に)。

[![](understanding-sirikit-images/monkeychat06.png "結果の両方と視覚的に、ユーザーに表示")](understanding-sirikit-images/monkeychat06.png#lightbox)

Siri は、各アプリに使用可能なドメインのいくつかの組み込みの応答のユーザー インターフェイスを持ちます。 ただし、MonkeyChat が省略可能なインテント UI 拡張機能を提供するために上記の例では、ユーザーにメッセージ交換の結果を提示する使用されます。

## <a name="the-intent-lifecycle"></a>インテントのライフ サイクル

アプリ拡張機能は、インテントを処理するときに実行する必要があります。 次の 3 つの主要なタスクがあります。

[![](understanding-sirikit-images/monkeychat07.png "インテントのライフ サイクル")](understanding-sirikit-images/monkeychat07.png#lightbox)

1. アプリにする必要があります**解決**イベントをすべてのパラメーター。 その結果、アプリが複数回 (各パラメーター) を 1 に 1 回と複数回も解決で呼び出す、同じパラメーター、アプリとユーザー要求内容に同意するまで。
2. アプリにする必要があります**確認**ことは、要求されたインテントを処理し、Siri を予想される結果について、できます。
3. 最後に、アプリが必要があります**処理**目的は、要求された結果を実現するために、手順を実行します。

### <a name="the-resolve-stage"></a>解決ステージ

解決ステージでは、Siri の値をユーザーが提供されるもので実際にどのようなユーザーが、目的としたが、アプリによって処理されるとどうなるかを理解することができます。 

この段階では、アプリのユーザーにメッセージ交換中に Siri の動作に影響を与える機会も提供します。 アプリを提供するのを**解決応答**します。 Siri を認識するデータのさまざまな種類に定義済みの応答を数多くあります。

最も一般的なアプリからの応答の解像度になります**成功**、つまり、アプリ (画面のユーザー名) などのパラメーターから特定の情報を知っているへ特定のデータを照合します。

アプリが特定の要求が適切な情報を知っていると一致することを確認する必要がある場合があります。 このような場合は、送信、 **ConfirmationRequired**など、ユーザーにはいまたは no 質問を投稿への応答 *「送信メッセージ Bobo に優れたでしょうか」。*

それ以外の場合、アプリではオプションの短い一覧から選択するユーザーに必要である可能性があります。 この場合、アプリを**曖昧性除去**ユーザーなどから選択するための 2 ~ 10 のオプションの一覧を含む応答。 

```csharp
Who do you want to message?

* Bobo the Great
* Bobo Jr.
* Little Bobo
```

Siri が口頭または Siri UI を操作することで、選択を行っているユーザーを処理して、結果は、アプリに送信されます。

それ以外の場合、パラメーターを解決するのには、アプリのための十分な情報がなくてもまたは曖昧性除去 (Bobo で 80 のユーザーの名前で) などを使用して解決するのには多数の一致結果である可能性があります。 アプリを送信するこのような場合、 **NeedsMoreDetails**応答と Siri より具体的にすることが求められます。

送信できる場合は、ユーザーには、プロセスのことを目的にために必要である値を指定していない、 **NeedsValue** Siri ユーザーに値を要求に応答します。

送信できるアプリがユーザー固有のパラメーターが指定する値をサポートしていない場合、 **UnsupportedWithReason**理由値はサポートされていない理由を指定する応答。 Siri がユーザーに完全に新しい値を求められますしとに指定された理由が必要です。

最後に使用して、**へ**Siri、アプリが特定のパラメーターに値を必要としないことを通知する応答。 ユーザーが 1 つか場合、Siri によって単純に無視されます。

### <a name="the-confirm-stage"></a>確認ステージ

確認段階では、2 つの目的があります。

- Siri のインテントを処理 Siri に、ユーザーに通知できますが発生すると、予期される結果を通知します。
- 必要な状態を含まない、アプリがユーザーに要求された支払を行うことで十分な資金があることなどによって提示される要求を完了する必要があります、営業案件のチェックを提供します。

アプリが提供、**インテント応答**の確認の手順で Siri と通信できるように、実質的に、ユーザーは、多くの情報、アプリで使用できるようにのように使用を入力する必要があります。

ドメインとアクションの種類に基づいて Siri 求めることができます、確認のためのユーザーなど、支払いの送信や、乗り物を予約する前にします。

### <a name="the-handle-stage"></a>ハンドルのステージ

処理ステージは、インテントに行うよう要求されましたが、タスクを実行することによって、アプリがユーザーの要求を満たすポイントのための操作の最も重要な部分です。

同様の確認段階で、アプリは Siri はこれをユーザーに関連付けることができるようにできるだけ結果に関する多くの情報を提供する必要があります。 この情報を視覚的に表示される場合があります。 またはユーザーに話すも Siri はだけです。 

ライブの人が (完了、注文の出荷とユーザーの場所に車を運転など) の要求を処理する必要がある場合、アプリはネットワーク呼び出しの遅延などの特定の要求の処理に余分な時間を必要とする場合または時間がかかることがあります。 Siri がアプリからの応答を待機しているユーザーにアプリが要求を処理して通知を待機している UI が表示されます。

理想的には、アプリ提供 Siri への応答を 2 ~ 3 秒以内で最もします。 送信する必要な場合は、アプリは、指定された応答がプロセスに時間がかかるしようとしていることを知っていれば、 **InProgress** Siri 応答コード。 アプリがバック グラウンドで要求を処理し、操作を行う場合でも、Siri 環境を離れるは引き続き、Siri は、ユーザーに通知します。

## <a name="adding-sirikit-to-the-app"></a>SiriKit のアプリへの追加

IOS 10 で SiriKit、Apple は 2 つの新しい拡張ポイントを作成しました。

- **Intents の拡張機能**- アプリのコンテンツを Siri を提供し、サポートされている任意のインテントを満たすために必要なタスクを実行します。
- **Intents UI 拡張機能**-Siri 内部アプリのコンテンツの表示されるカスタム UI を提供します。 

形式での認識を支援するための Siri に単語や語句を提供するための API もです。

- **アプリのボキャブラリ**の単語や語句は、アプリのすべてのユーザーに共通します。
- **ユーザーのボキャブラリ**の単語や語句、特定のアプリ ユーザーに固有であります。

## <a name="the-intents-extension"></a>Intents の拡張機能

Intents の拡張機能は、次のように、アプリと Siri の主なやり取りを処理します。

[![](understanding-sirikit-images/intents01.png "Intents の拡張機能")](understanding-sirikit-images/intents01.png#lightbox)

目的とした拡張機能は、1 つまたは複数のインテントをサポートできますが、アプリでの SiriKit の実装を希望する方法を決定する開発者の責任です。 開発者は、各インテントを処理する必要があるの別個の目的とした拡張機能を追加する可能性がありますもできます。  ただし、Apple Siri が複数のプロセスを処理するために、追加のメモリと時間を必要とするアプリに対して開く必要があるないように、開発者が目的とした拡張機能の数を制限ことを要求します。

開発者は、Siri がアクティブな間に、目的の拡張機能、バック グラウンドで実行することに注意してください必要があります。 これにより、要求に関する情報を処理する拡張機能とまだ通信中に、ユーザーとのメッセージ交換でアクティブに実行するための Siri ができます。

## <a name="privacy-and-security-considerations"></a>プライバシーとセキュリティに関する考慮事項

Apple では、ユーザーの秘密の Siri を使用する場合は、情報はセキュリティで保護し、そのため、iOS デバイス ログオンする必要があるいくつかの相互作用があることを確認する優れたメジャーを取得しました。 例では、乗車を要求するときに、支払いを行うか。

また、特定のアプリは、デバイスにログインしているユーザーに制限する特定の動作が使用されます。 このような場合、アプリが要求できる、**を制限するときにロック**動作します。 設定を使用してこれには、`Info.plist`ファイル。

ローカル認証フレームワークは、目的の拡張機能の使用可能なように、アプリは、追加の認証については、ユーザーを要請することができる場合でも、デバイスは、既にロックされています。

最後に、Apple Pay が目的とした拡張機能の使用可能なため、Apple Pay を使用してトランザクションを完了できるアプリと Siri インターフェイス上の組み込みの Apple Pay のシートに表示されます。

Apple がさらに、情報とサード パーティのアプリはそのため、ユーザーが送信されているときにユーザーが知っていることを確認する必要がある**する必要があります**(アプリのバンドルの表示名で指定) として、アプリの特定の名前を言うと、要求を行います。

Apple に流動的な自然な会話とユーザー、およびこうした理由からを実行するための Siri が設計されていますが、アプリのバンドルの名前は、ユーザーの要求で自然に適合場所に多くの部分の音声認識で使用できます。

ユーザーが実行する一般的なことの 1 つが、"verbify"アプリの名前、つまり、アプリ名を取得し、要求内の動詞として使用します。 たとえば、 *"MonkeyChat Bobo 優れた bananas だったのです"。*

## <a name="the-intents-ui-extension"></a>Intents UI 拡張機能

Intents UI 拡張機能はアプリの UI と Siri エクスペリエンスにブランド化する機会を提示してアプリに接続されていると感じるユーザーです。 この拡張により、アプリはブランドとトラン スクリプトにビジュアルと他の情報を表示できます。

[![](understanding-sirikit-images/intents02.png "Intents UI 拡張機能の出力の例")](understanding-sirikit-images/intents02.png#lightbox)

Intents UI 拡張機能は常に返します、`UIViewController`と、アプリには、初回の応答を超える追加の情報を示すなどのビュー コント ローラーの内部でいいね、何も追加できます。 Intents UI は、その場所に到達する車の共有乗り物かかります時間などの実行時間の長いイベントの状態で、ユーザーを更新もできます。

Intents UI 拡張機能は常にする UI の上部にある名前とアプリのアイコンなどの他の Siri コンテンツと共に表示されますかに基づく目的、下部にある (送信またはキャンセル) などのボタンが表示されます。

アプリケーションが Siri メッセージングなどの既定で、ユーザーに表示する、またはアプリがアプリに合わせていずれかの既定の動作を置き換えることができます、マップされる情報を置き換えることがいくつかのインスタンスがあります。

> [!IMPORTANT]
> などの対話型要素を追加することはできますが`UIButtons`または`UITextFields`を目的とした UI 拡張機能の`UIViewController`、非対話型で目的の UI として禁じこれらと、ユーザーは、対話機能を使用できません。

Siri にインテントの種類ごとに UI の既定のセットが含まれているので、目的の UI 拡張機能を提供するアプリを完全に省略できます。 さらに、Intents UI インターフェイスはのみ使用可能な特定のインテントを Apple と判断したことをユーザーに役立つでしょうです。

## <a name="adding-sirikit-vocabulary"></a>SiriKit のボキャブラリの追加

SiriKit の実装の最後のピースが必要なボキャブラリが提供することで、アプリ内に存在します。 多くのアプリでは、情報をユーザーと、ユーザーは、アプリに情報を提供する独自の方法を説明するための一意の方法があります。

このため、Siri に単語と、アプリに一意の語句を理解するアプリのサポートが必要です。 アプリの一部は、すべてのユーザーが知る、理解できるようにこれらのフレーズの一部になります。 まだ他のユーザーがアプリの特定のユーザーを一意になります。

### <a name="app-specific-vocabulary"></a>アプリ固有のボキャブラリ

アプリの特定のボキャブラリは、すべての車両のタイプやトレーニングの名前など、アプリのユーザーに、特定の単語や語句を認識するを定義します。 定義されているこれらは、アプリケーションの一部であるため、`AppIntentVocabulary.plist`メイン アプリ バンドルの一環としてファイル。 さらに、これらの単語や語句をローカライズする必要があります。

いくつかの部分、ボキャブラリを`AppIntentVocabulary.plist`ファイル。

- **例のアプリでは使用**-これらアプリのユーザーと、要求の一般的なユース ケースのセットを提供します。 例: *"MonkeyFit で、トレーニングを Start"。*
- **パラメーター** -アプリに固有の非標準のパラメーター型のセットを提供します。 たとえば、トレーニング アプリの名を MonkeyFit。 これらは、で構成されます。
    - **語句**-アプリの一意の語句を定義するアプリに許可します。 例: MonkeyFit アプリの"Bananarific"トレーニングの種類。 
    - **発音**-Siri を特定のフレーズの単純な音声スペルとして発音のヒントを提供します。 たとえば、"ba nana ri fic"です。
    - **例**-特定のフレーズを使用して、アプリでの例を示します。 たとえば、 *"MonkeyFit で、Bananarific の開始"* します。

詳細については、Apple を参照してください[アプリ ボキャブラリ ファイル形式のリファレンス](https://developer.apple.com/library/prerelease/content/documentation/Intents/Conceptual/SiriIntegrationGuide/CustomVocabularyKeys.html#//apple_ref/doc/uid/TP40016875-CH10-SW1)します。

### <a name="user-specific-vocabulary"></a>ユーザーの特定の語彙

特定の語彙をユーザーがアプリの個々 のユーザーに固有の語句を提供しようとしています。 これらは、メイン アプリ (アプリ拡張機能) から実行時に、一覧の先頭に最も重要な用語を持つ、ユーザーの最も重要な使用の優先度で並べ替え用語の順序付けされたセットとして提供されます。

上で示した MonkeyChat アプリの例を見てください。 MonkeyChat では、すべてのユーザーの特定の語彙経由で Siri を送信するユーザーの連絡先のリストを保持します。 ユーザー メッセージの数が 10 の最新の連絡先の一覧を保持することもあり、各ユーザーのお気に入りの連絡先のセット。 この例では、お気に入りの連絡先とする必要が、ユーザー固有ボキャブラリ、最近の連絡先を続けての開始時、ユーザーの連絡先の残りの部分。

次の種類の情報は、ユーザーの特定の語彙でサポートされます。

- 連絡先の名前。
- トレーニングの名前。
- フォト アルバムの名前。
- 写真のキーワードです。

アプリが iOS アドレス帳に依存している場合 Siri にこの情報が既に、何も操作アプリにはありません。 アプリは、アプリに連絡先の独自の一意のデータベースがある場合、連絡先の名前を提供するだけです。

ボキャブラリを設計するときにのみ、ユーザーが理解し、気にするために必要な値を提供します。 電話番号または電子メール アドレスなどの情報を提供しないようにします。

アプリは、特定の語彙をユーザーが変更されたときに Siri を迅速に更新する必要があります。 ユーザーが情報を要求するに慣れるため Siri とすぐに自分の iOS デバイスに追加されているからです。 たとえば、ユーザーは、アプリで新しい連絡先を追加する場合その情報を送信 Siri にユーザーがそれを保存するようになります。

アプリではさらに、_する必要があります_Siri がまだ正しく認識数時間または日後の情報を削除する場合は、ユーザーを混乱になる可能性がありますのでに Siri のボキャブラリから情報をすぐに削除します。

> [!IMPORTANT]
> アプリがからすべて削除ユーザーの特定の語彙の Siri ユーザーがアプリをリセットする場合、または場合、ログアウトします。

## <a name="sirikit-permissions"></a>SiriKit のアクセス許可

SiriKit の最後の部分は、アクセス許可の中心となります。 IOS (写真、カメラや連絡先) などの他の機能を使用して、同様のユーザー Siri と対話するアプリの明示的な権限を付与する必要があります。

アプリは Siri を提供し、ユーザーがこのアクセスを許可する理由についての理由を指定は、どのような情報を定義する文字列を指定できます。 

Apple では、アプリは、それらが iOS 10 にアップグレードした後、ユーザーがアプリを開く Siri 最初の時刻を使用するユーザーから許可を要求する必要がありますを提案します。 これは、ユーザーは Siri の統合について知っておくし、最初の要求を加える前に事前承認済みの使用状況をできるようにします。

## <a name="sirikit-and-maps"></a>SiriKit とマップ

SiriKit は iOS の不可欠な部分と、iOS 10 に追加された大規模なインテント フレームワークを利用します。 インテント フレームワークは、システムの他の部分を共有し、一般的なアクションとインテントを共有するように設計されました。

インテント フレームワークでは、Siri 統合だけを超えるし、連絡先の統合がアプリになる既定のテレフォニーまたは特定の連絡先のメッセージング アプリなどの他の機能を提供します。 インテントは、密に連携可能な VOIP の最高のエクスペリエンスをユーザーに提供する CallKit も提供します。

IOS 10 でのマップ アプリには、乗車の共有、ユーザーが Maps UI 内で直接の乗り物を予約できるなどの機能が追加されます。 Siri とマップ間乗り物共有 (およびその他) のインテントで共有できるように、SiriKit は Maps を使用した一般的な拡張ポイントを提供します。 

つまり、アプリが SiriKit の拡張機能を採用すると場合もられるマップ統合無料。 

## <a name="designing-a-great-siri-experience"></a>優れた Siri エクスペリエンスの設計

Siri にアプリを統合するときに、優れたユーザー エクスペリエンスを設計することは、優れたアプリのユーザー インターフェイスの設計と異なります。 直接、アプリに対するユーザーの操作を正常な状態とは異なりは、画面で、ある Siri を使用する場合は、ときにビジュアル インターフェイスは表示されません。 すべてを何度もには。 たとえば、ユーザーが開始された時点でメッセージ交換 *"Hey Siri"* します。

### <a name="how-siri-helps-the-developer"></a>Siri が開発者を支援する方法

Siri とアプリの対話を設計するとき、アプリを構築すること、*会話インターフェイス*、つまり、コンテキストは、アプリの代わりにユーザーを Siri が発生しているメッセージ交換から派生します。

ビジュアルの参照がない場合、ユーザー必要があります情報の追跡、自分の頭に表示されています。 このため、Siri はベア最小限の情報、タスクを実現するために必要なため、ユーザーが希望されるを表示します。

会話インターフェイスからは、メッセージ交換中に質問と回答して、ユーザーと Siri の両方から形成されました。 したがって Siri の質問をしてこのインターフェイスを設計するときに応答する方法について考える重要です。

Siri が、質問に応答メッセージを作成するユーザーの次の例を見て *「に送信する準備がでしょうか」。*. ユーザーがなどのさまざまな方法で対応できます *「送信」*、 *「キャンセル」* この質問に完全には関係のないものもまたはします。 メッセージ交換の再生方法に関係なく Siri はアプリでは、処理し、送信関連情報が利用可能になった。

ユーザーが Siri とのメッセージ交換を開始がいくつかのさまざまな方法はあります。

- デバイスを選択して、[ホーム] ボタンを押します。 このような状況で Siri より多くのビジュアル インターフェイスと少ない口頭で応答が表示されます。
- 示す *"Hey Siri"* および自在のメッセージ交換を開始します。 このような状況で Siri は小さい visual および口頭による複数になります。
- Bluetooth などのユーザー補助機能を使用すると、特別なニーズを持つユーザーの UI をカスタマイズ、聴覚補助が有効になります。
- 混乱を最小限に維持することで推進することに重点を置いた、ユーザーが、注意を保持する必要がある自動車の再生を使用しています。

### <a name="how-the-developer-helps-siri"></a>開発者が Siri を使用する方法

Siri とアプリを統合するときに、開発者を多くの場合、この統合をテストし、できるだけ多くのさまざまな方法で情報やタスクの同じ部分を要求した多数のさまざまな要求を行う、ことを確認する必要があります。

2 つの人にとっても考慮してくださいありません、ため、開発者を取得する多くのさまざまなベータ テスター細かく調整のために、できるだけ Siri 統合が重要です。 ユーザーが情報を求められる場合がありますまたはことを要求の方法で、開発者が決しての微調整役立つ、広範なユーザー グループの Siri と、アプリを使用して、優れた体験でいることを確認します。

さまざまな状況や環境でテストします。 すべてのこれらのメッセージ交換が流体を入手することを確認することで、自然な方法で Siri との会話を開始します。 場所、ユーザーが多くの場合使用して、アプリのようにいっぱいになったジムでの場所でテストします。

アプリが提供しているすべての Siri がユーザーに要求と結果を適切に表すために必要な情報を確認します。 これは、手の無料のような状況で Siri を使用する場合に特に当てはまります。

### <a name="siri-design-guidelines"></a>Siri のデザイン ガイドライン

常に、Siri、アプリの代わりに、ユーザーとのメッセージ交換があることに注意してください。 開発者がこのメッセージ交換がまだよくわからないとスムーズになり、可能な限り自然です。

任意の重要なメッセージ交換のよう、開発者は、次のことを確認する必要があります。

- メッセージ交換のアプリが準備されます。
- 達成したいアプリが正確にどのようなユーザーにをリッスンします。
- アプリは、適切なタイミングで適切な質問を確認します。
- アプリは、ユーザーが求めている情報を要求に応答します。

#### <a name="preparing-for-the-conversation"></a>メッセージ交換の準備

最初に注意してくださいは、アプリのユーザーは、開発者とまったく同じようにしません。 別の背景は、異なる言語を話すか、アプリを使用する場合は、特別なニーズを持ってくる可能性があります。

さらに、開発者、設計され、アプリをビルドするため、知識を持ってで深くの両方のアプリとその内部動作および関数の一般的なユーザーはありません。 ように開発者は、通常のユーザーとは異なる siri 要求を依頼可能性があります。

これは、ため、できるだけ多くのさまざまな人が Siri を使用するアプリと対話するときに重要です。 ユーザーは、または開発者が考えていなかった方法で、開発者は考えてもみなかった Siri を使用してアプリの要求を行うことがあります。

#### <a name="ensure-the-app-is-a-good-listener"></a>アプリが適切なリスナーであることを確認します。

開発者は、アプリが適切なリスナーし、ユーザーの期待を満たすメッセージ交換の詳細を取得することを確認する必要があります。 こと可能性がありますされませんを指定したすべての情報が要求されたタスクを実現するために、アプリが必要であることもできます。

アプリがこのような状況を処理がいくつかの方法はあります。

- **欠損値の適切な既定の選択**- たとえば共有アプリの乗車がユーザーの現在の場所から取得するつもりでしたを指定していない場合に既定可能性があります。
- **目星**-ユーザーにアプリが収集される具体的な情報を使用して、アプリできる場合がありますとなどユーザーの連絡先情報からの不足している携帯電話番号を入力、不足している情報を推測します。 ただしが最も高いオプションなどの選択など、不適切な予想外の問題を回避するために注意を取得する必要があります。
- **詳細情報の入力を求める**-アプリは、欠損値の入力を求めます Siri を持つことができます。 ただし、シンプルで、ポイントには、ここで重要に保持するメッセージ交換には。 ユーザーにその要求を実現するためにいくつかの質問に回答する必要がある場合は、ストレス簡単になります。
- **誤った情報を適切に処理**-ユーザーは、アプリが想定するか、指定されたコンテキストで処理できない値を指定可能性があります。 アプリが明確で簡単に修正できる方法でユーザーにこのような状況に関連することを確認します。

問題が 1 つの値では、アプリが表示されたら、これに対処することをお勧めは Siri ユーザー確認を要求には。 たとえば、 *「もしかして Bobo 優れたでしょうか」。*、単純なはいまたは no 応答で応答できるようにします。

いくつかの選択肢を 1 つの値の正しいできますような状況がある場合は、曖昧性除去は、推奨される処理方法です。 このような状況で Siri は最大 10 個の使用可能なオプションから選択すると、ユーザーに求めることもできます。 例えば:

```csharp
Who do you want to send the message to?

* Bobo the Great!
* Bobo Jr.
* Little Bobo
```

質問の指定された値をまったく新しいより特定の回答を提供するように求める Siri があります。

#### <a name="request-final-confirmation"></a>最終確認を要求

アプリは、実際には、ユーザーの要求を満たすためにタスクを実行、前に Siri は準備が整ったことを確認するアプリの拡張機能を確認します。 たとえば、ユーザーは十分な資金支払いを要求されたアカウントのでしょうか。

さらに、アプリは、それが提供しているすべての可能な情報 Siri をユーザーに提示し、タスクを実行しようとしていますが、期待を満たしていることを確認するようにすることを確認する必要があります。

要求と、アプリ、ユーザーが確認されると実行していること、アプリのニーズを提供して、結果をすべて Siri に戻るため、ユーザーに関連付けることができますをもう一度確認します。

#### <a name="responding-to-the-request"></a>要求に応答します。

Siri は、それぞれのドメインと認識されるアクションのいくつかの組み込みのユーザー インターフェイスを持ちます。 ただし、必要に応じて、アプリはアプリのブランドし UI または要求に存在していたより多くの情報を提示することで、ユーザー エクスペリエンスを強化するには、カスタム インテント UI 拡張機能を提供できます。

ただし、Siri のカスタム インターフェイスを設計するときに、用紙を使用する必要があります。 通常、ユーザーは、できるだけ早く行う特定のタスクを取得しようとしているが、不要な情報は、オーバー ロードを希望しません。

注意してくださいにカスタム UI が検索し、すべての別の iOS デバイスと向きをユーザーが必要がありますまたはデバイスを使用することで正しく応答することを確認します。

適切な場合は、既定の Siri UI に既に存在するすべての冗長な情報を非表示にする SiriKit API を使用します。 まだアプリがまだ提供している情報は、Siri を自在の状況で口頭で表すことができるように確認してください。

Siri が、ユーザーが要求して写真を表示するなどのユーザーの要求を満たすためにアプリを起動する場所の状況である可能性があります。 このような場合は、ユーザーを突然はありません。 途中のステップまたはさらに必要なの操作をしなくても、必要な情報を表示します。 決して情報の表示や、ユーザーが予期していないタスクを実行します。

### <a name="polishing-the-design"></a>デザインに磨きをかける

Apple の提案に会話インターフェイスのデザインに磨きをかけるいくつかの手順があります。 最初に、明確で簡潔なボキャブラリと使用例に Siri を提供することです。

Siri と、確認するメッセージ交換を開始することによって、ユーザーがアプリを検出する方法の 1 つは *「何ができるでしょうか」。* Siri は、開発者のアプリを含む、実行できるし、例 hero 経由で提供しているケースを使用して、いくつかの異なるものに表示されます、`plist`ファイル。

ユース ケースの良い例を記述する方法。

- 例では、アプリ名を含めることを確認します。
- 例では、短期保存とポイントを保持します。
- アプリをサポートするインテントごとの複数の例を提供します。
- インテントと、アプリの最も一般的なユース ケースに基づいてそれらに含まれる例では、優先順位を設定します。
- アプリがローカライズされた例を提供することを確認します。
- アプリ内で期待どおりに動作を指定されたそれぞれの例を確認します。
- Siri をアドレス指定の例などのテキストを含めないように回避 *「Hey Siri…」*
- などの不要な pleasantries を回避 *「ください」* または *「ありがとう」* します。

探索および実験、アプリが自身のためにユーザーを Siri が発生しているメッセージ交換を整形する方法にするには、適切な時間がかかります。 やり取りとして、プロセス全体での一般的なユーザーと対話することを確認し、アプリへの期待を時間の経過と共に変更する可能性があります。

さまざまな状況でアプリと Siri とのメッセージ交換を呼び出す別のメソッドのすべてをテストしてください。 テストの実際の場所に、ユーザーの可能性があるアプリを使用して、オフィスやデスクから離れています。

流体、自然と「と考える適切な」(アプリケーション) の代わりに Siri 会話に努めてください。 

## <a name="summary"></a>まとめ

この記事では、SiriKit を使用するために必要し、iOS デバイスで Siri とマップ アプリを使用してユーザーがアクセスできるサービスを提供する Xamarin.iOS アプリとやり取りできるかを示すには、主要な概念について説明しました。




## <a name="related-links"></a>関連リンク

- [ElizaChat サンプル](https://developer.xamarin.com/samples/monotouch/ios10/ElizaChat/)
- [SiriKit のプログラミング ガイド](https://developer.apple.com/library/prerelease/content/documentation/Intents/Conceptual/SiriIntegrationGuide/index.html)
- [インテントのフレームワーク参照](https://developer.apple.com/reference/intents)
- [Intents UI フレームワークの参照](https://developer.apple.com/reference/intentsui)
