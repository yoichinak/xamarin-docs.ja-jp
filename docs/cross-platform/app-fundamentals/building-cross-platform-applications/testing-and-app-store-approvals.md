---
title: パート 6 - テストと App Store の承認
description: このドキュメントでは、デバイス上でクロスプラットフォームアプリケーションをテストする方法、テストケースを管理する方法、テストを自動化する方法、単体テストを実行する方法、およびアプリ送信プロセスを使用する方法について説明します。
ms.prod: xamarin
ms.assetid: 46E0578A-7EB9-C105-ABB0-A043E501F36B
author: davidortinau
ms.author: daortin
ms.date: 03/23/2017
ms.openlocfilehash: 5bddbee99f068baea69d3bc7dc8bcb731c547a43
ms.sourcegitcommit: 4e399f6fa72993b9580d41b93050be935544ffaa
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/29/2020
ms.locfileid: "91458018"
---
# <a name="part-6---testing-and-app-store-approvals"></a>パート 6 - テストと App Store の承認

## <a name="testing"></a>テスト

多くのアプリ (一部のストア) では、発行前に承認プロセスを渡す必要があります。そのため、アプリが市場に到達したことを確認するためにテストが不可欠です (お客様に対してのみ成功します)。 テストでは、開発者レベルの単体テストからさまざまなハードウェアでのベータテストの管理まで、さまざまな形を取ることができます。

### <a name="test-on-all-platforms"></a>すべてのプラットフォームでテストする

Windows phone、タブレット、およびデスクトップデバイスで .NET がサポートするものと、その場で動的コードが生成されないようにする iOS の制限事項には、わずかな違いがあります。 開発時に複数のプラットフォームでコードをテストすることを計画するか、プロジェクトの最後にアプリケーションのモデル部分をリファクタリングおよび更新する時間をスケジュールします。

シミュレーターまたはエミュレーターを使用して、複数のバージョンのオペレーティングシステムと、さまざまなデバイス機能/構成をテストすることをお勧めします。

また、可能な限り多くの異なる物理ハードウェアデバイスでテストする必要があります。

#### <a name="devices-in-cloud"></a>クラウド内のデバイス

携帯電話およびタブレットエコシステムは常に成長しているため、使用可能なデバイスの数が増え続けることをテストすることは不可能です。 この問題を解決するには、多数の異なるデバイスをリモートで制御して、多数のハードウェアに直接投資することなく、アプリケーションをインストールおよびテストできるようにします。

App Center テストでは、数百のデバイスで iOS アプリケーションと Android アプリケーションを簡単にテストできます。 詳細については、「 [Xamarin Android アプリを準備](/appcenter/test-cloud/preparing-for-upload/xamarin-android-uitest) する」および「 [xamarin IOS アプリを準備](/appcenter/test-cloud/preparing-for-upload/xamarin-ios-uitest)する」を参照してください。

### <a name="test-management"></a>テスト管理

組織内でアプリケーションをテストする場合や、外部ユーザーとのベータプログラムを管理する場合は、次の2つの課題があります。

- **配布** –プロビジョニングプロセスを管理し (特に iOS デバイスの場合)、更新されたバージョンのソフトウェアをテスト担当者に提供します。
- **フィードバック** –アプリケーションの使用状況に関する情報、および発生する可能性のあるエラーに関する詳細情報を収集します。

これらの問題に対処するには、さまざまなサービスが用意されています。アプリケーションに組み込まれているインフラストラクチャを使用して、使用状況やエラーを収集してレポートすることができます。また、プロビジョニングプロセスを合理化して、テスト担当者とそのデバイスをサインアップして管理することもできます。

[Visual Studio App Center](/appcenter/) は、これらの問題に対する解決策を提供し、テストバージョンの配布、クラッシュレポート、および高度なアプリケーションの使用状況に関する情報を提供します。

### <a name="test-automation"></a>テストの自動化

Xamarin [UITest](/appcenter/test-cloud/preparing-for-upload/uitest) を使用すると、ローカルに実行したり [App Center テスト](/appcenter/test-cloud/)にアップロードしたりできる自動化されたユーザーインターフェイステストスクリプトを作成できます。

## <a name="unit-testing"></a>単体テスト

### <a name="touchunit"></a>Touch.Unit

Xamarin. iOS には、JUnit/NUnit スタイルの作成テストの後に続く、Touch と呼ばれる単体テストフレームワークが含まれています。

テストの作成と Touch の実行に関する詳細については、「 [Xamarin の単体テスト](~/ios/deploy-test/touch.unit.md) 」を参照してください。

### <a name="andrunit"></a>Andr. 単位

Android では、オープンソースに相当する Touch が Andr. Unit と呼ばれています。 [Github](https://github.com/spouliot/Andr.Unit)からダウンロードして、 [ @spouliot のブログ](https://spouliot.wordpress.com/2011/10/30/andr-unit-joins-the-family/)でツールを確認することができます。

## <a name="app-store-approvals"></a>App Store の承認

Apple と Microsoft は、それぞれのプラットフォーム (App Store と Marketplace) でのみストアを運用しています。 デバイスをロックダウンし、アプリの厳密なレビュープロセスを実装して、ダウンロード可能なアプリケーションの品質を制御します。 Android のオープンな性質とは、Google の Play から、広く利用されていて、レビュープロセスを受けていないさまざまな店舗オプションがあります。また、配布が制限され、承認プロセスを実装する Samsung アプリのようなハードウェア固有の作業について、Amazon の Appstore にも対応しています。

アプリがレビューされるのを待つと、非常に負荷になる可能性があります。多くの場合、アプリケーションは、"対象" の起動日より前に、エラーの余白がごくわずかであることを確認するために送信されます。 プロセス自体には最大2週間かかることがありますが、必ずしも透過的であるとは限りません。最終的に拒否または承認されるまで、アプリケーションの進行状況に関するフィードバックは限られています。 拒否は、営業案件のマーケティングウィンドウがないことを意味します (特に、複数回発生する場合)。また、最初の開始日から、アプリが最後に承認されたときまでに何週間もかかります。

### <a name="be-prepared"></a>準備

最初のアドバイスとして、アプリの起動を事前に計画し、予想される拒否と再送信の許容量を確保します。 各ストアでは、アプリを送信する前にアカウントを作成する必要があります。これはできるだけ早い段階で行います。
アプリが無料の場合、Google Play のサインアップには数分かかりますが、販売を行っていて銀行と税金の情報を提供する必要がある場合は、プロセスがさらに複雑になります。 Apple と Microsoft のプロセスはどちらも Google よりもはるかに複雑です。お客様のアカウントを承認するために1週間以上かかることがあります。そのため、この時間を発表計画に反映させることができます。

アカウントが承認されると、アプリを送信する準備が整います。 アプリを送信する実際のプロセスについては、次のドキュメントを参照してください。

- [Apple の iOS App Store に発行しています](~/ios/deploy-test/app-distribution/app-store-distribution/publishing-to-the-app-store.md)
- [Google Play 用にアプリを準備する](~/android/deploy-test/publishing/publishing-to-google-play/index.md)
- Windows 開発者は、 [Windows デベロッパーセンター](https://developer.microsoft.com/windows/windows-apps) にアクセスして、アプリの送信についてお読みください。

このセクションの残りの部分では、崩すを使用せずにアプリを承認するために考慮する必要がある事項について説明します。

### <a name="quality"></a>品質

当然のことですが、アプリケーションは特定の品質レベルを満たしていないため、拒否されることがよくあります。これは、curated ストアの最初の段階で承認プロセスが行われる理由です。

クラッシュは、一般的に拒否される理由です。 アプリをクラッシュさせるのが簡単すぎる場合は、拒否されることが保証されます。 ほとんどの開発者は、クラッシュすることを期待してアプリを送信しませんが、多くの場合、 アプリケーションを送信する前に徹底的にテストし、すべてが動作していることを確認するだけでなく、ネットワークの問題やメモリや記憶域などのリソースの制約など、一般的なモバイルエラーシナリオにも対応できます。 シミュレーターと物理デバイスの両方を使用して、シミュレーターでのコードの実行方法に関係なく、アプリの実際のパフォーマンスを示すことができるのはデバイスだけです。 サードパーティのサービスでベータ版の配布やフィードバックの管理に役立てることができる場合は、さまざまなデバイスを利用して、ベータテスト担当者のチームを参加させることができます。

すべてのモバイルオペレーティングシステムで、すぐに起動しないアプリケーションが強制終了します。 許容される時間の長さは異なりますが、一般に、アプリでは数秒で応答性を目指し、バックグラウンドタスクを使用して時間がかかる処理を実行することをお勧めします。 読み込みに時間がかかりすぎる、または通常の使用に十分な応答がないアプリは拒否されます。 バックグラウンドで何らかの問題が発生したとき、またはアプリがクラッシュしたと思われる場合は常にユーザーにフィードバックを提供し、再び拒否します。

### <a name="check-your-edge-cases"></a>エッジケースを確認する

開発者にとって一般的なトラップは、エッジケースに対処できません。特に、シミュレーターまたはデバイスを適切に再構成する必要がある場合です。 すべてのお客様が自分の場所へのアクセスを許可するとは限りません。これは、開発者が要求を1回承諾した後に、再度メッセージが表示されることがないためです。 アクセス許可とネットワーク使用量は、承認プロセス中に特に focussed ます。つまり、これらの領域の小さな監視によって拒否される可能性があります。

次の一覧は、欠落している可能性のあるエッジケースを確認するための出発点として適しています。

- **お客様は、サービスへのアクセスを拒否することができ** ます。特に iOS では、ユーザーがアプリケーションにアクセス許可を付与した場合にのみ、geo ロケーション情報などのデータへのアクセスが提供されます。 アプリケーションのテスト担当者は、アプリケーションが適切に動作することを確認するために、最初の状態でアプリケーションを再インストールし、アクセス許可要求を許可しないことがよくあります。 ユーザーが気を変更したときに正しい動作を確認するには、アクセス許可のオンとオフを切り替えます。
- **お客様はどこにい** ても、アプリは開発された市区町村または国でのみ使用されるとは限りません。 GPS 座標で動作するコード、日付と時刻の値、通貨はすべて、顧客の所在地とロケールの設定によって影響を受けることがあります。 すべてのプラットフォームでは、さまざまな場所およびロケールを指定できるシミュレーターが提供されています。他の上下半球での場所のテストに使用したり、日付と通貨の書式を異なるカルチャに設定したりできます。 緯度と経度の値には、正または負の値を指定できます。小数点区切り記号にはピリオドまたはコンマを使用できます。また、日付はさまざまな方法で書式設定できます。
- **低速のネットワーク接続** -アプリ開発者は、"理想的な世界" で動作することがよくあります。ネットワーク接続は、実際には実際にはそうではありません。 低速のネットワーク接続 (たとえば、不十分な3G 接続) を使用したテストや、ネットワークアクセスがない場合は、バグのあるアプリを出荷しないようにすることが重要です。 承認プロセスには、常にデバイスのテストが航空機モードで含まれているので、自分でテストしたことを確認してください。
- **ハードウェアによって異なり** ます。サポートする予定の最も古い、最も低速なハードウェアについては、必ずテストしてください。 アプリに影響する可能性がある2つの側面があります。これは、古いデバイスでは使用できない場合があり、カメラ、マイク、GPS、ジャイロスコープ、その他のオプションコンポーネントなどのハードウェア機能をサポートする場合があります。 コンポーネントが使用できなくなると、アプリケーションは正常に (かつクラッシュせずに) 低下します。

### <a name="guidelines-are-more-than-just-a-guide"></a>ガイドラインは、単なるガイドではありません。

Apple は、プラットフォームの重要な強みの1つが整合性であるという点で、人間のインターフェイスガイドラインに準拠することを厳密に認識しています (さらに、使いやすさが向上しています)。 Microsoft は、 [Fluent デザインシステム](https://microsoft.com/design/fluent)を実装する Windows アプリケーションと同様のアプローチを採用しています。 両方のプラットフォームの承認プロセスでは、関連する設計思想に準拠するために、アプリが評価されます。

これは、ユーザーインターフェイスのイノベーションがサポートまたは推奨されていないということではありませんが、"何もする必要がありません" またはアプリが拒否されることがあります。

IOS では、これには組み込みアイコンの誤用や、その他の適切に確立されたメタファの使用などが含まれます。たとえば、[作成] アイコンを使用して、新しいコンテンツを作成する以外の操作を行うことができます。

Windows 開発者は同様に注意する必要があります。よくある間違いは、Microsoft のガイドラインに従ってハードウェアの戻るボタンを正しくサポートできないことです。

各プラットフォームのデザインガイドラインを読み、それに従うように設計者に勧めます。

### <a name="implementing-platform-specific-features"></a>プラットフォーム固有の機能の実装

特に iOS では、プラットフォーム固有のサービスを実装する場合は、さらに厳密になります。 Apple による自動拒否を避けるために、次の iOS 機能に従うルールがいくつかあります。

- **アプリ内購入** -アプリケーションは、ゲーム内通貨、アプリケーション機能、雑誌サブスクリプションなどのデジタル製品の外部支払いメカニズムを実装することはできません。 iOS アプリでは、この種の機能に対して Apple の iTunes ベースのサービスを使用する必要があります。 Kindle Reader のような抜け穴のアプリがあり、サブスクリプションベースのアプリによっては、アプリを使用してアクセスできる "アカウント" に接続されている別の場所にコンテンツを購入できます。ただし、この場合、アプリには、アプリ外購入プロセスへのリンクや参照を含めることはできません。
- **icloud のバックアップ** – icloud の登場により、Apple のレビュー担当者は、アプリがどのようにストレージを使用するか (お客様のリモートバックアップエクスペリエンスが快適になるようにするため) に関して、はるかに厳密になります。 バックアップが可能な記憶域スペースを浪費するアプリは拒否される可能性があるため、キャッシュフォルダーを適切に使用し、Apple のその他の記憶域関連のガイドラインに従ってください。
- **Newsstand** –新聞アプリと雑誌アプリは、Apple の Newsstand に最適です。ただし、アプリでは少なくとも1つの自動更新サブスクリプションを実装し、承認されるようにバックグラウンドダウンロードをサポートする必要があります。
- **Maps** –オーバーレイやその他の機能を mobile Maps に追加することはますます一般的になっていますが、マップの "クレジット" 情報 (IOS5 の Google ロゴなど) が不明瞭にならないように注意してください。これにより、拒否が発生します。

### <a name="manage-your-metadata"></a>メタデータの管理

アプリケーションが拒否される原因となる明らかな技術的問題に加えて、アプリストアまたは Marketplace 内で表示するためにアプリケーションに送信するメタデータ (説明、キーワード、およびマーケティングイメージ) に関しては、拒否される可能性がある、送信の微妙な側面がいくつかあります。

- **画像–プラットフォーム** のアプリケーションアイコンに関するガイドラインに従い、画像を保存します。 商標イメージを使用しないでください。アプリのアイコンが iPhone の描画を利用するため、アプリは拒否されます。
- **商標** –お客様自身以外の商標を使用することは避けてください。 アプリの説明、または Apple の App Store のキーワードに記載されている商標に対するアプリの登録が拒否されました。
- **説明** – "beta" という語を使用したり、アプリの準備ができていないことを示す何らかの方法を使用したりしないでください。 他のモバイルプラットフォームには言及しません (アプリがクロスプラットフォームの場合でも)。 最も重要なのは、アプリが何を言っているかを正確に確認することです。 説明にいくつかの機能を一覧表示する場合は、これらの機能を使用する方法を明確にすることをお勧めします。そうしないと、「アプリケーションの説明に記載されている機能が実装されていません」という拒否が発生します。

開発とテストのために、アプリケーションのメタデータに多くの労力を置きます。 アプリケーションは、メタデータ内のマイナー infringements に対して拒否されるため、適切に取得するのに時間がかかることがあります。

### <a name="app-stores-not-for-everyone"></a>アプリストア: すべてのユーザーではありません

各プラットフォームでのストアの主な目的は、コンシューマーの配布です。できる限り多くの顧客にリーチすることができます。 ただし、すべてのアプリケーションがコンシューマーを対象としているわけではありませんが、社内およびエクストラネットに似たアプリケーションのベースが急速に増加しており、従業員、サプライヤー、顧客への限定的な配布が必要になる場合があります。 開発者は、終了したユーザーグループへの配布を制御するため、これらのアプリは "販売用" ではなく、承認を必要としません。
この種類の展開のサポートは、プラットフォームによって異なります。

Android はこの点で最も柔軟性があります。アプリケーションは、URL または電子メールの添付ファイルから直接インストールできます (デバイスの構成で許可されている限り)。 つまり、社内のアプリケーションを作成および配布したり、特定の顧客やサプライヤーにアプリケーションを発行したりするのは簡単ではありません。

Apple では、iOS Developer Enterprise Program に登録されている開発者向けの社内デプロイオプションを提供しています。これにより、App Store の承認プロセスがバイパスされ、企業は社内のアプリを従業員に配布できるようになります。
残念ながら、このライセンスは、他の閉鎖された顧客またはサプライヤーグループに対するエクストラネットのようなアプリの配布の必要性には対応していません。 [エンタープライズ (およびアドホック) 展開](~/ios/deploy-test/app-distribution/ipa-support.md)

### <a name="app-store-summary"></a>App Store の概要

レビュープロセスは困難な場合がありますが、開発ライフサイクルの残りの部分と同様に、計画と詳細について成功を確実にすることができます。 すべての簡単な手順について説明します。従う必要があるユーザーインターフェイスのガイドラインを読んで理解し、プラットフォーム固有の機能を実装している場合はルールに従って、テストを徹底的に実行してから、最後にアプリケーションのメタデータが正しいことを確認してから送信してください。

Google Play に発行する開発者に対するアドバイスの最後の1つは、承認プロセスがないと思われるかもしれませんが、お客様にはレビューチームよりも多くの要件があります。 アプリが拒否される可能性がある場合と同様に、これらのガイドラインに従ってください。そうでない場合は、拒否することになります。